1.base-vm project
virsh list --all
virsh start project
virsh console nroject
user :root
psssword:123456

2.lsmod 查询内核参数
ps -efww 查看详细PID

    3.命令List 列出虚拟机 #]virsh list --all
start|shutdown|reboot 虚拟机启动 停止 重启
destory 强制停止虚拟机
define|undefine 根据xml文件 创建 删除虚拟机
console 链接虚拟机的控制界面 #]virsh console nsd1907
eip 20 修改ip reboot重启

   edit 修改虚拟机配置 virsh edit nsd1907
autostart 设置虚拟机自启
domiflist 查看虚拟机网卡信息
domblklist 查看虚拟机硬盘信息
cd /var/lib/libvirt/images
qemu-img info tedu_node51.img
virsh nodeinfo 查看cpu 内存信息

命令前加上net查看网络交换机信息和修改交换机配置
如: virsh net-list --all
    Virsh net-edit 网卡名如:vbr
    Virsh net-define vbr等


3.远程控制服务器查看电源:ipmitool -I lanplus -U root -H 服务器ip power status
开启服务器电源:ipmitool -I lanplus -U root -H 服务器ip power on
关闭服务器电源:ipmitool -I lanplus -U root -H 服务器ip power off
重启服务器电源:ipmitool -I lanplus -U root -H 服务器ip power reset
远程管理:ipmitool -I lanplus -U root -H 服务器ip sol activate

网卡信息:cd /etc/sysconfig/network-scripts/


创建虚拟机:
cd /var/lib/libvirt/images/
qemu-img create -b .node_base.qcow2 -f qcow2 openstack 50G
cp .node_base.xml /etc/libvirt/qemu/openstack.xml
vim /etc/libvirt/qemu/openstack.xml
virsh define /etc/libvirt/qemu/openstack.xml
virsh start openstack

virsh 扩容磁盘
 
真机上操作1 2步:
1.查找要扩容的磁盘地址
 virsh domblklist nsd1907

2.扩容磁盘
 virsh blockresize --path /var/lib/libvirt/images/nsd1907.img --size 50G nsd1907

进去虚拟机里面操作如下两步:
3.分区扩容
 lsblk
growpart /dev/vda 1

4 文件系统扩容
xfs_growfs /

时间服务器
查看是否同步: chronyc sources -v

watch -n 1 'virsh list --name'


分屏
yum -y install screen
}#screen
先ctrl+A后再shift+s 横切

ctrl+A |  竖着切

ctrl+A + n 创建并同步一个窗口

Crtl+A + c 新建一个窗口并切换到当前窗口

ctrl+A + table 切换分屏

ctrl+A shift+x 删除分屏

ctrl+A 空格 循环切换窗口

ctrl+A k 关闭窗口

